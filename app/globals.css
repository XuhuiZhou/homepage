@import 'tailwindcss';
@plugin '@tailwindcss/typography';
@custom-variant dark (&:is(.dark *));

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }

  /* Base font size for non-blog pages */
  html {
    font-size: 18px;
    scroll-behavior: smooth;
  }

  /* Charter font stack for blog posts - Tufte-inspired */
  .font-charter {
    font-family: Charter, Palatino, 'Palatino Linotype', 'Book Antiqua', Georgia, serif;
  }

  /* Tufte CSS counter system for blog posts */
  .blog-post {
    counter-reset: sidenote-counter;
  }

  .sidenote-number {
    counter-increment: sidenote-counter;
  }

  .sidenote-number::after {
    content: counter(sidenote-counter);
    font-size: 0.75rem;
    position: relative;
    vertical-align: baseline;
    top: -0.5rem;
    left: 0.1rem;
  }

  .sidenote::before {
    content: counter(sidenote-counter) " ";
    font-size: 0.75rem;
    position: relative;
    top: -0.5rem;
  }

  /* Tufte-style colors for blog */
  .blog-tufte-light {
    background-color: #fffff8;
    color: #111;
  }

  .blog-tufte-dark {
    background-color: #151515;
    color: #ddd;
  }

  /* Mobile behavior for sidenotes - Tufte style */
  @media (max-width: 1280px) {
    /* Hide checkbox and label on desktop */
    input[type="checkbox"].hidden {
      display: none;
    }

    label.sidenote-number,
    label[for^="mn-"] {
      display: inline;
      cursor: pointer;
    }

    /* Show sidenotes inline when checkbox is checked */
    input[type="checkbox"]:checked + .sidenote,
    input[type="checkbox"]:checked + .marginnote {
      display: block !important;
      float: none;
      width: 95%;
      margin: 1rem 2.5%;
      position: relative;
      left: 0;
      clear: both;
    }

    /* Hide by default on mobile */
    .sidenote,
    .marginnote {
      display: none;
    }
  }

  @media (min-width: 1280px) {
    /* Hide toggle indicators on desktop */
    label[for^="mn-"] {
      display: none;
    }
  }

  /* Tufte-style full-width figures */
  .fullwidth {
    max-width: 100%;
    width: 100%;
    clear: both;
  }

  @media (min-width: 1280px) {
    .fullwidth {
      /* Override prose max-width constraint */
      max-width: none !important;

      /* Extend into citation margin: content width + gap + citation column */
      width: calc(100% + 3rem + 300px);
    }
  }

  figure.fullwidth {
    max-width: 100%;
  }

  figure.fullwidth figcaption {
    text-align: center;
    margin-top: 0.75rem;
  }

  /* Make bold text more prominent in blog posts */
  .blog-post strong,
  .blog-post b {
    font-weight: 600;
  }

  /* Italic + bold combination for emphasis */
  .blog-post .emphasis,
  .blog-post em strong,
  .blog-post strong em {
    font-weight: 600;
    font-style: italic;
  }
}

:root {
  --sh-class: #7aa2f7;
  --sh-sign: #89ddff;
  --sh-string: #9ece6a;
  --sh-keyword: #bb9af7;
  --sh-comment: #565f89;
  --sh-jsxliterals: #7aa2f7;
  --sh-property: #73daca;
  --sh-entity: #e0af68;
}
